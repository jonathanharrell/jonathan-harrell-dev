@import "./fonts.css";
@import "./vars.css";
@import "./overrides.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .no-caps {
    font-variant: normal;
  }

  .small-caps {
    font-variant: small-caps;
  }

  .all-small-caps {
    font-variant: all-small-caps;
  }
}

@layer components {
  .article-body {
    @apply grid grid-cols-12 gap-x-16 text-lg lg:text-xl !leading-normal;
  }

  .article-body > *:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply col-start-1 col-end-9;
  }

  .article-body > .toc-wrapper {
    @apply col-start-9 col-end-13 row-start-1 relative;
  }

  .toc-wrapper .toc {
    @apply absolute text-neutral-500;
  }

  .article-body > table {
    @apply col-start-1 col-end-13;
  }

  .article-body table {
    @apply leading-snug;

    th, td {
      @apply py-4 px-6 border-b border-neutral-700;
    }

    th:first-child, td:first-child {
      @apply pl-0;
    }

    th:last-child, td:last-child {
      @apply pr-0;
    }

    thead th {
      @apply text-left all-small-caps;
    }
  }

  .article-body > aside:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply col-start-9 col-end-13 relative italic text-lg leading-snug;
  }

  .article-body > aside p:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply absolute;
  }

  .article-body :where(p, ul, ol, figure, pre, table):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-4;
  }

  .article-body :where(p, ul, ol, figure, pre):has(+ figure):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-8;
  }

  .article-body > figure:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply grid grid-cols-subgrid col-start-1 col-end-13 mb-8;
  }

  .article-body > figure :where(img, svg, div):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply col-start-1 col-end-9;
  }

  .article-body > figure figcaption:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply col-start-9 col-end-13 italic text-lg;
  }

  .article-body > *:has(+ h2):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-12;
  }

  .article-body > *:has(+ aside + h2):not(:where([class~=not-article-body] *)) {
    @apply mb-12;
  }

  .article-body h2:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-4 text-3xl italic;
  }

  .article-body h3:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-4 text-2xl;
  }

  .article-body > *:has(+ h3):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-8;
  }

  .article-body code:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply text-[15px];
  }

  .article-body pre:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply py-3 px-6 text-[15px];
  }

  .article-body a:not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply underline hover:no-underline underline-offset-4 decoration-1;
  }

  .article-body :where(img):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply w-full h-auto bg-neutral-50 dark:bg-neutral-950;
  }

  .article-body :where(svg):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply w-full h-auto bg-neutral-50 dark:bg-neutral-950;
  }

  .article-body :where(ol, ul):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply list-disc ml-4 marker:text-neutral-500;
  }

  .article-body :where(li):not(:where([class~=not-article-body],[class~=not-article-body] *)) {
    @apply mb-1;
  }

  .article-body blockquote {
    @apply mb-8 pl-5 border-l-4 border-neutral-700 italic;
  }

  .article-body blockquote p {
    @apply mb-0;
  }

  .article-body blockquote cite {
    @apply block mt-2 not-italic text-base text-neutral-500;
  }

  .article-body blockquote cite::before {
    @apply mr-0.5 content-["â€”"];
  }
}
